---
import AskamaFor from "./AskamaFor.astro";
import AskamaIf from "./AskamaIf.astro";
import AskamaMatch from "./AskamaMatch.astro";
import AskamaWhen from "./AskamaWhen.astro";
import { askama } from "../askama";

export interface Props {
  entity: string;
}
---

<div class="flex grow justify-center pt-10">
  <div class="max-w-md flex flex-col items-center">
    <AskamaMatch expr="entity.image">
      <AskamaWhen pat="Some(image)">
        <div class="w-lg mb-5">
          <a href="https://en.wikipedia.org/wiki/{{ entity.title|urlencode }}">
            <img
              class="h-full w-full rounded-full"
              src="/entity/image/{{ image|urlencode }}"
            />
          </a>
        </div>
      </AskamaWhen>
      <AskamaWhen pat="None" />
    </AskamaMatch>
    <div class="text-xl mb-2">
      <a href="https://en.wikipedia.org/wiki/{{ entity.title }}"
        >{askama`entity.title`}
      </a>
    </div>
    <div class="text-sm">
      {askama`entity.small_abstract`}
      <span class="italic">
        source: <a
          class="text-blue-600"
          href="https://en.wikipedia.org/wiki/{{ entity.title|urlencode }}"
          >wikipedia</a
        >
      </span>
    </div>
    <AskamaIf expr="!entity.info.is_empty()">
      <div class="flex flex-col text-sm mt-5 w-full px-4">
        <div
          class="border-separate border-spacing-x-4 gap-x-4 grid grid-cols-[auto_1fr] border-spacing-y-1.5"
        >
          <AskamaFor elem="(key, value)" in="entity.info">
            <div class="text-gray-400">
              {askama`key`}
            </div>
            <div>
              {askama`value`}
            </div>
          </AskamaFor>
        </div>
      </div>
    </AskamaIf>
    <AskamaIf expr="!entity.related_entities.is_empty()">
      <div class="flex flex-col mt-5 text-gray-500 w-full">
        <div class="font-light">Related Searches</div>
        <div class="flex">
          <AskamaFor elem="entity" in="entity.related_entities">
            <div class="flex flex-col items-center p-4">
              <AskamaMatch expr="entity.image">
                <AskamaWhen pat="Some(image)">
                  <div class="h-20 w-20 mb-3">
                    <a href="/search?q={{ entity.title|urlencode }}">
                      <img
                        class="h-full object-cover w-full rounded-full"
                        src="/entity/image/{{ image|urlencode }}"
                      />
                    </a>
                  </div>
                </AskamaWhen>
                <AskamaWhen pat="None" />
              </AskamaMatch>

              <div class="text-center">
                <a href="/search?q={{ entity.title|urlencode }}">
                  {askama`entity.title`}
                </a>
              </div>
            </div>
          </AskamaFor>
        </div>
      </div>
    </AskamaIf>
  </div>
</div>
