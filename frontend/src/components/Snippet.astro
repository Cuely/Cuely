---
import Hero from "./Hero.astro";
import { askama } from "../askama";

export interface Props {
  snippet: string;
}
---
<div>
    {
    askama.match("item.snippet", {
        "Snippet::Normal { date, text }": (
            <div>
                {askama.if_("let Some(date) = date", () => (
                <span class="text-gray-500">
                    {askama`date $ 2. May 2022`}
                </span>
                ))}
                <span class="[&:nth-child(2)]:before:content-['â€”']">
                {askama`text|safe $ {{lorem.lines}}`}
                </span>
            </div>
        ),
        "Snippet::StackOverflowQA { question, answers }": (
            <div>
                <div>
                    <div class="max-h-16 overflow-hidden break-words">
                    {
                    askama.for_("part in question.body", () => (
                        <>
                        {
                        askama.match("part", {
                            "CodeOrText::Text(text)": (
                                <span>{askama`text`}</span>
                            ),
                            "CodeOrText::Code(code)": (
                                <span>{askama `code`}</span>
                            )
                        })
                        }
                        </>
                    ))
                    }
                    </div>
                </div>
                <div class="text-sm flex space-x-2">
                {
                askama.for_("answer in answers", () => (
                    <a class="bg-slate-100 hover:bg-slate-600 hover:text-white h-52 w-1/3 p-5 rounded-lg hover:cursor-pointer hover:no-underline" href="{{ answer.url }}">
                        <div class="w-full h-full overflow-hidden">
                            <div class="flex justify-between grow mb-2">
                                <div>{askama`answer.date`}</div>
                                <div class="flex space-x-2">
                                    <div class="flex items-center space-x-1">
                                        <span class="h-fit">
                                            {askama`answer.upvotes`}
                                        </span>
                                        <div class="h-fit">
                                            <Hero class="w-3" icon="thumb-up" />
                                        </div>
                                    </div>
                                    {
                                        askama.if_("answer.accepted", () => (
                                            <div>
                                                <Hero class="w-5 text-green-500" icon="check" />
                                            </div>
                                        ))
                                    }
                                    </div>
                                </div>
                            <div>
                                {
                                askama.for_("part in answer.body", () => (
                                    <div class="select-none">
                                    {
                                        askama.match("part", {
                                            "CodeOrText::Text(text)": (
                                                <span>{askama`text`}</span>
                                            ),
                                            "CodeOrText::Code(code)": (
                                                <pre class="select-none"><code class="rounded-lg select-none" style="background: none">{askama `code`}</code></pre>
                                            )
                                        })
                                    }
                                    </div>
                                ))
                                }
                            </div>
                        </div>
                    </a>
                ))
                }
                </div>
            </div>
        )
    })
    }
</div>