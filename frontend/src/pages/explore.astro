---
import Footer from "../components/Footer.astro";
import Header from "../components/Header.astro";
import Layout from "../layouts/Layout.astro";
import Hero from "../components/Hero.astro";
import { askama } from "../askama";
---

<Layout title="Stract">
  <div class="relative grid h-full grid-rows-[auto_1fr_auto]">
    <div class="row-start-1">
      <Header withAlice={askama`with_alice`} showDivider={true} activeIndex={1} queryUrlPart={askama`query_url_part $ ""`} />
    </div>
    <div class="row-start-2 flex mt-10 px-5 justify-center">
      <div class="flex flex-col grow max-w-3xl">
        <noscript>
          <div class="text-red-600">Unfortunately, this site requires javascript to function.</div>
        </noscript>

        <div class="flex flex-col mb-4 items-center">
          <div class="flex flex-col space-y-1 items-center mb-5">
            <h1 class="text-2xl font-bold">Explore the web</h1>
            <p class="text-center">Find sites similar to your favorites and discover hidden gems you never knew existed.</p>
          </div>
          <div class="flex border rounded-full w-full max-w-lg p-[2px] pl-3 mb-2" id="site-input-container">
            <input class="outline-none focus:ring-0 grow" type="text" id="site-input" name="site" autofocus placeholder="www.example.com" />
            <button id="add-site-btn" class="bg-brand text-sm text-white opacity-75 hover:opacity-100 transition-colors duration-50 rounded-full py-2 px-5">Add</button>
          </div>
          <label class="text-red-600 mb-4 hidden" for="site-input" id="site-input-error">Unfortunately, we don't know about that site yet.</label>
          <div class="flex flex-wrap gap-x-5 gap-y-3" id="sites-list"></div>
        </div>

        <div class="hidden" id="result-container">
          <div class="flex items-center justify-between mb-5">
            <div class="flex items-center space-x-5">
              <h2 class="text-2xl font-bold">Similar sites</h2>
              <div class="flex space-x-1">
                <select id="limit" class="styled-selector">
                  <option value="10">10</option>
                  <option value="25">25</option>
                  <option value="50">50</option>
                  <option value="125">125</option>
                  <option value="250">250</option>
                  <option value="500">500</option>
                  <option value="1000">1000</option>
                </select>
              </div>
            </div>
            <a href="#" download="exported.optic" class="bg-brand text-white opacity-75 hover:opacity-100 transition-colors duration-50 rounded-full py-2 px-5" id="export-optic">Export as optic</a>
          </div>
          <div id="result" class="grid grid-cols-[1fr_1fr_6fr] gap-y-2"></div>
          <div class="w-full flex justify-center">
            <div class="w-6 h-6 cursor-pointer rounded-full text-brand_contrast" id="more-btn">
              <Hero icon={"chevron-down"} />
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row-start-3">
      <Footer />
    </div>
  </div>
</Layout>

<style is:global>
  .site {
    padding: 0.5rem;
    background-color: rgba(11, 123, 255, 0.05);
    color: rgb(11, 123, 255);
    border-radius: 0.5rem;
  }
</style>

<script is:inline src="/js/explore.js"></script>
<script is:inline src="/js/lz-string.min.js"></script>